<dom-module id="battlesaveunit-dialog">
  <template>
  
  <style is="custom-style" include="civ-paper-button-styles" >

   </style>
  
    <paper-dialog id="dialog" modal>
    
     <div>
     
       <h2>{{header}}</h2>
    
       <civ-chooseunits id="list">
          <div style="margin-left:20px;">
          <paper-button id = "save" class="green" dialog-dismiss on-click="_onClick">{{localize('saveunit')}}</paper-button>            
        </div>
         
       </civ-chooseunits>
     </div>
        
    </paper-dialog>
  </template>

  <script>
      class BattleSaveUnitsDialog extends Polymer.CivDialog(Polymer.Element) {
          
      static get is() { return 'battlesaveunit-dialog'; }
      
      _onClick() {
    	  const u = this.$.list.getChoosed()
          C.executeC("saveunit",{ "row" : u.index, "col" : -1})
      }
      
      fun(e) {
         C.displayelem(this.$.save,true)    	  
      }
                                    
      refresh(pa) {
    	  this.header = C.localize("saveyourunit","civ",pa.civ)
    	  const li = { "list" : pa.killedunits}
    	  this.$.list.fun = e =>this.fun(e)
    	  this.$.list.draw(li)
    	  C.displayelem(this.$.save,false)
      }
      
    }

    window.customElements.define(BattleSaveUnitsDialog.is, BattleSaveUnitsDialog);
  </script>
</dom-module>