<dom-module id="civ-listres">

<template>

  <style>
       .horizontal {
         @apply(--layout-horizontal);
       }
  </style>

<div id="map" class="horizontal">
  <template is="dom-repeat" items="{{res}}">
    <civ-dispres id="i{{index}}" data="{{item}}"></civ-dispres>
 </template>
<div>

 </template>

 <script>
     class CivListRes extends Polymer.CivData(Polymer.Element) {

     static get is() { return 'civ-listres'; }

     static get properties() {
         return {
             res : {
                 type: Array
             }
         }
     }
     
     getRes() {
    	 if (this.res == null) return []
    	 return this.res
     }

     refresh(pa) {
       if (pa == null) {
    	   this.res = []
    	   return
       }
       this.res = pa
     }
     
     afterdraw(pa) {
    	 if (this.fun == null || pa == null) return
    	 const s = this.$.map
         for (var i=0; i < s.childNodes.length; i++) {
           const cc = s.childNodes[i]
           if (cc.nodeName == "CIV-DISPRES") {
        	 const id = cc.id  
             cc.fun = d => 
        	    this.fun(d,id)
           }
         } // for
     }

   }

   window.customElements.define(CivListRes.is, CivListRes);
 </script>
</dom-module>
