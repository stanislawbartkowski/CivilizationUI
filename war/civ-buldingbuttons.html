<dom-module id="civ-buildingbuttons">
<template>

<custom-style>

<style is="custom-style" include="civ-paper-button-styles" >

:host {
    display: inline-block;
  }

</style>

</custom-style>

<div>
   <paper-button id="build" class="green" hidden on-click="_onClick">{{localize('build')}}</paper-button>
   <paper-button id="replace" class="indigo" hidden on-click="_onClick">{{localize('replace')}}</paper-button> 
   <civ-square id="r1" style="display:none"></civ-square>  
   <civ-square id="r2" style="display:none"></civ-square>  
</div>

</template>

<script>
class CivBuldingButtons extends Polymer.CivData(Polymer.Element) {

    static get is() {
        return 'civ-buildingbuttons';
        }
    
    static get properties() {
        return {
            replace: {
              type : Boolean,
              value : false
            },
            build : {
              type : Boolean,
              value : false
            },
            click : {
            	type : Object,
            	value : null
            }
          }
        }

    _hide() {
    	C.showeleme(this.$.replace,false)
        C.showeleme(this.$.build,false)
        C.displayelem(this.$.r1,false)
        C.displayelem(this.$.r2,false)
    }
    
    _onClick(e) {
    	if (this.click == null) return
    	this.click(this.build)    	
    }

    refresh(data) {
    	this._hide()
    	if (data == null) return
    	const r1 = this.$.r1
        C.displayelem(r1,true,true)    	
    	if (this.replace) { 
    		if (data.pp.list.length == 0) return
    		C.showeleme(this.$.replace,true)
    	}
    	if (this.build) {
            if (data.pp.list.length > 0) return
            C.showeleme(this.$.build,true)
            r1.draw(data.p)
    	}
    	
    }

}

customElements.define(CivBuldingButtons.is, CivBuldingButtons);

</script>

</dom-module>
