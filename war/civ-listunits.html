 <dom-module id="civ-listunits">
    <template>

       <template id="map" is="dom-repeat" items="{{units}}">
           <civ-units class="unit" data="{{item}}" draggable="{{draggable}}" num="{{index}}" you="{{you}}"></civ-units>
        </template>

  </template>

  <script>
      class CivListUnits extends Polymer.CivData(Polymer.Element) {

      static get is() { return 'civ-listunits'; }

      static get properties() {
          return {
              units: {
                  type: Array
              },
              draggable : {
                type : Boolean
              },
              you : {
                type : Boolean
              }
          }
      }

      _findLevel(pa,name) {
        return C.findUnitLevel(pa.units,name)
      }

      refresh(pa) {
    	  const l = pa.list
    	  this.units = []
    	  for (var i=0; i<l.length; i++) {
    		  const elem = {}
    		  elem.name = l[i].name
    		  elem.strength = l[i].strength
    		  elem.level = this._findLevel(pa,elem.name)
    		  this.units.push(elem)
    	  }
      }

    }

    window.customElements.define(CivListUnits.is, CivListUnits);
  </script>
</dom-module>
