 <dom-module id="civ-resources">
    <template>
  
   <custom-style>
      <style is="custom-style" include="iron-flex iron-flex-alignment"></style>
    </custom-style>
  
    <style>   
       :host {
        display: block;
      }
      
      .resbox {
         padding: 5px;
         width:  30px; 
         height: 30px;
         display:inline-block;
         
         border-radius: 50%;
         border : 1px solid;
         background-color: #e6e6ff;
         border-color : #3333ff;
         margin : 5px;
         
      }
            
    </style>
    

   
   <span id="spansilk" class="resbox" style="display:none"  title="{{localize('silklabel')}}">
     <s-svg id="silk" src="images/resource/silk.svg" ></s-svg>
     <paper-badge hidden id="silknumber" for="silk" label="X">
      </paper-badge>
    </span>      

   <span id="spaniron"   title="{{localize('ironlabel')}}" class="resbox" style="display:none">
     <s-svg id="iron" src="images/resource/iron.svg"></s-svg>
     <paper-badge hidden id="ironnumber" for="iron" label="X">
      </paper-badge>
    </span>      

   <span id="spanwheat" class="resbox" title="{{localize('wheatlabel')}}" style="display:none">
     <s-svg id="wheat" src="images/resource/wheat.svg"></s-svg>
     <paper-badge hidden id="wheatnumber" for="wheat" label="X">
      </paper-badge>
    </span>      

   <span id="spanincense" class="resbox" style="display:none" title="{{localize('incenselabel')}}">
     <s-svg id="incense" src="images/resource/incense.svg"></s-svg>
     <paper-badge hidden id="incensenumber" for="incense" label="X">
      </paper-badge>
    </span>      

   <span id="spanhut" class="resbox" style="display:none" on-click="click">
     <s-svg id="hut" src="images/huts/hut.svg"></s-svg>
     <paper-badge hidden id="hutnumber" for="hut" label="X">
      </paper-badge>
    </span>      

   <span id="spanvillage" class="resbox" style="display:none" on-click="click">
     <s-svg id="village" src="images/huts/village.svg"></s-svg>
     <paper-badge hidden id="villagenumber" for="village" label="X">
      </paper-badge>
    </span>      

   <span id="spanspy" class="resbox" style="display:none" on-click="click">
     <s-svg id="spy" src="images/resource/spy.svg"></s-svg>
     <paper-badge hidden id="spynumber" for="spy" label="X">
      </paper-badge>
    </span>      

   <span id="spanuranium" class="resbox" style="display:none" on-click="click">
     <s-svg id="uranium" src="images/resource/uranium.svg"></s-svg>
     <paper-badge hidden id="uraniumnumber" for="uranium" label="X">
      </paper-badge>
    </span>      

<!-- 
    <template id="map" is="dom-repeat" items="{{resources}}">
       <span class="resbox">
         <s-svg id="{{item.name}}" src="images/resource/{{item.name}}.svg" ></s-svg>
         <paper-badge id="{{item.name}}number" for="{{item.name}}" label="{{item.num}}">
         </paper-badge>
       </span>
    </template>        
-->    
    
  </template>

  <script>
   class CivResources extends Polymer.CivData(Polymer.GestureEventListeners(Polymer.Element)) {
    	  
      static get is() { return 'civ-resources'; }
      
      static get properties() {
          return {
               names : {
            	   readOnly : true,
            	   type :Array,
            	   value : ["silk","iron","wheat","incense","spy","uranium"]
               },
               names1 : {
                  readOnly : true,
                  type :Array,
                  value : ["hut","village"]
               }
          }
      }
      
      _remove(n) {
    	  C.displayelemid(this,"span"+n,false)
    	  C.showeleme(this.$[n+"number"],false)
      }
      
      _clear() {
         for (var i=0; i<this.names.length; i++) this._remove(this.names[i])        
         for (var i=0; i<this.names1.length; i++) this._remove(this.names1[i])        
      }
            
      click() {
    	  C.opendialogwithpar("showhv-dialog",this.data1)
      }
      
      _display(n,num) {
          if (num == 0) this._remove(n)
          else {
              C.displayelemid(this,"span"+n,true,true)
              C.displaybadge(this.$[n + "number"],num)
          }
      }
      
      _displayhv(r,n) {
    	  var num = 0
    	  if (r[n] != null) num = r[n] 
  		  this._display(n.toLowerCase(),num)
      }

      refresh1(r) {
    	  if (r == null) return
    	  this._displayhv(r,"Hut")
          this._displayhv(r,"Village")    	  
      }
       
      refresh(r) {
    	  if (r == null) {
    		  this._clear()
    		  return
    	  }
          for (var i=0; i<this.names.length; i++) {
        	  var f = -1;
        	  const n = this.names[i]
        	  for (var j=0; j < r.length; j++) 
        		  if (n ==  r[j].resource.toLowerCase()) {
        			  f = j;
        			  break;
        		  }
        	  var num = 0
        	  if (f != -1) num = r[f].num
        	  this._display(n,num)
          }
      }

   } 
   window.customElements.define(CivResources.is, CivResources);
  </script>
</dom-module>